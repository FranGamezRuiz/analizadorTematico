
{% extends 'base.html' %}


{% block content %}


    <!--Menu lateral-->

      <div class="row">
        <nav class="col-md-2 d-md-block bg-light sidebar">

          <div  class="sidebar-sticky">
            <ul class="nav flex-column">
                <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
                    <span>{{ tipo }}</span>
                </h6>
                <li class="nav-item">
                    <a class="nav-link d-flex" href="{% url 'tema-grGeneral-view' tema.pk nTipo %}">General</a>
                </li>
                {% for categoria in categorias %}
                    <li class="nav-item">
                        <a class="nav-link d-flex" href="{% url 'tema-graficas-view' tema.pk nTipo categoria%}">{{ categoria.nombre }}</a>
                    </li>
                {% endfor %}
            </ul>
          </div>

        </nav>


    <!--Contenido de la página-->

     <main role="main" class="col-md-9 ml-sm-auto col-lg-10 pt-3 px-4">
          <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom">
            <h1 class="h2">{{ tema }} {{ titulo }}</h1>

          </div>
         <div>Número de tweets: {{ nTweets }}</div>
         <div>Número de tweets analizados con TextBlob: {{ tweetsTextBlob }}
            <canvas class="my-4" id="myChart" width="900" height="380"></canvas>
            <canvas class="my-4" id="myChart2" width="900" height="380"></canvas>
         </div>
         {% if tipo != 'Actual' %}
             <div>Número de tweets analizados con MeaningCloud: {{ tweetsMeaning }}
                <canvas class="my-4" id="myChart3" width="900" height="380"></canvas>
                <canvas class="my-4" id="myChart4" width="900" height="380"></canvas>
             </div>
         {% endif %}
    </main>
      </div>


    <script>
        var ctx = document.getElementById('myChart').getContext('2d');
        var myChart = new Chart(ctx, {
            type: 'pie',// bar, horizontalBar, pie, line, doughnut, radar, polarArea

            data: {
                labels: {{labels|safe}},
                datasets: [{
                    data: {{data|safe}},
                    backgroundColor: {{colors|safe}}
                }]
            },
            options: {
                title: {
                    display: true,
                    text: 'Porcentaje opiniones con TextBlob',
                },
                legend: {
                    disblay: true,
                    position: 'right',
                    labels: {
                        fontColor: '#000'
                    }
                }

            }


        });

        var ctx = document.getElementById('myChart2').getContext('2d');
        var myChart3 = new Chart(ctx, {
            type: 'line',
            data: {
                labels: {{ fechas|safe }},
                datasets: [{
                    data: {{ valores|safe }},
                    label: '{{ titulo }}',
                    borderColor: "#3e95cd",
                    fill: false
                }
                ]
            },
            options: {
                title: {
                    display: true,
                    text: 'Evolución de la opinión por días TextBlob'
                }
            }
        });

        var ctx = document.getElementById('myChart3').getContext('2d');
        var myChart = new Chart(ctx, {
            type: 'pie',// bar, horizontalBar, pie, line, doughnut, radar, polarArea

            data: {
                labels: {{labels2|safe}},
                datasets: [{
                    data: {{data2|safe}},
                    backgroundColor: {{colors2|safe}}
                }]
            },
            options: {
                title: {
                    display: true,
                    text: 'Porcentaje opiniones con MeaningCloud',
                },
                legend: {
                    disblay: true,
                    position: 'right',
                    labels: {
                        fontColor: '#000'
                    }
                }

            }


        });

        var ctx = document.getElementById('myChart4').getContext('2d');
        var myChart3 = new Chart(ctx, {
            type: 'line',
            data: {
                labels: {{ fechas2|safe }},
                datasets: [{
                    data: {{ valores2|safe }},
                    label: '{{ titulo }}',
                    borderColor: "#3e95cd",
                    fill: false
                }
                ]
            },
            options: {
                title: {
                    display: true,
                    text: 'Evolución de la opinión por días MeaningCloud'
                }
            }
        });

    </script>
{% endblock %}

